for(var numerojoueur=1,colonnes=5,lignes=5,jeu=!0,text="",plateau=[],i=0;i<lignes;i++)plateau[i]=[];function newGame(){for(var e=0;e<lignes;e++)for(var u=0;u<colonnes;u++)plateau[e][u]=0;numerojoueur=1,afficheTextAnnonce("Le jeu commence , c'est au tour du joueur "),nomDuJoueur(numerojoueur),jeu=!0,creerTableau()}function afficheTextAnnonce(e){document.getElementById("textannonce").innerHTML=e}function nomDuJoueur(e){return 1==e?"rouge":"bleu"}function creerTableau(){text="<table>";for(var e=0;e<lignes;e++){text+="<tr>";for(var u=0;u<colonnes;u++)text+='<td onclick="detecteClick('+u+')" id="'+e+"-"+u+'">',1==plateau[e][u]?text+="<div class='joueur1'></div>":2==plateau[e][u]&&(text+="<div class='joueur2'></div>"),text+="</td>";text+="</tr>"}text+="</table>",document.getElementById("puissance4").innerHTML=text}function detecteClick(e){verifPosition(e)&&this.jeu&&(puissance4(poseJeton(e),e,0,0)?(jeu=!1,afficheTextAnnonce(nomDuJoueur(numerojoueur)+" a gagné la partie"),console.log("END OF GAME !!")):afficheTextAnnonce("C'est au tour du joueur "+nomDuJoueur(numerojoueur=1==numerojoueur?2:1)))}function verifPosition(e){return 0==plateau[0][e]}function poseJeton(e){for(var u=lignes-1;u>=0;u--)if(0==plateau[u][e])return plateau[u][e]=numerojoueur,refreshTab(u,e,numerojoueur),u}function refreshTab(e,u,n){document.getElementById(e+"-"+u).innerHTML='<div class="joueur'+n+'"></div>'}function puissance4(e,u,n,o){if(0==o&&0==n){console.log("valeurs:"+e+" "+u+" / increment "+n+" "+o);var t=1+puissance4(e,u-1,0,-1)+puissance4(e,u+1,0,1),r=1+puissance4(e-1,u,-1,0)+puissance4(e+1,u,1,0),a=1+puissance4(e-1,u-1,-1,-1)+puissance4(e+1,u+1,1,1),i=1+puissance4(e-1,u+1,-1,1)+puissance4(e+1,u-1,1,-1);return console.log(t,r,a,i),t>=4||r>=4||a>=4||i>=4}return e<this.lignes&&e>=0&&u<this.colonnes&&u>=0?(console.log("recu valeurs : "+e+" "+u+" / Incrément "+n+" "+o),this.plateau[e][u]==this.numerojoueur?(console.log("ok "+numerojoueur),1+puissance4(e+n,u+o,n,o)):(console.log("pas ok "+numerojoueur),0)):0}newGame();